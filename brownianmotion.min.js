const n=12;const t=12;const s=4;const i="rgb(80, 80, 80)";const o=6;const h=5;const e="rgb(0, 0, 200)";const c=2*Math.PI;class r{constructor(t,s){this.x=t;this.y=s}sub(t){return new r(this.x-t.x,this.y-t.y)}mul(t){return new r(this.x*t,this.y*t)}t(){return new r(-this.x,-this.y)}i(t){return this.x*t.x+this.y*t.y}get h(){return Math.sqrt(this.x**2+this.y**2)}clone(){return new r(this.x,this.y)}}class l{constructor(t,s,i,h,n){this.position=new r(t,s);this.r=i;this.o=new r(h,n);this.l=new Set}get u(){return this.r**2}m(){this.position.x+=this.o.x;this.position.y+=this.o.y}g(t,s){if(this.position.x<this.r){this.position.x=this.r;this.o.x=-this.o.x}else if(this.position.x>t-this.r){this.position.x=t-this.r;this.o.x=-this.o.x}if(this.position.y<this.r){this.position.y=this.r;this.o.y=-this.o.y}else if(this.position.y>s-this.r){this.position.y=s-this.r;this.o.y=-this.o.y}}M(t){return(this.position.x-t.position.x)**2+(this.position.y-t.position.y)**2<(this.r+t.r)**2}p(t){if(this.M(t)){if(this.l.has(t)){return}const s=this.o.sub(t.o);const i=this.position.sub(t.position);const h=s.i(i);const n=2*t.u/(this.u+t.u);const o=i.mul(h/i.h**2);const e=this.o.sub(o.mul(n));const c=s.t();const r=i.t();const l=c.i(r);const a=2*this.u/(this.u+t.u);const w=r.mul(l/r.h**2);const u=t.o.sub(w.mul(a));this.o=e;t.o=u;this.l.add(t);t.l.add(this)}else if(this.l.has(t)){this.l["delete"](t);t.l["delete"](this)}}}class a{constructor(){this.B=document.getElementById("layer1");this.C=this.B.getContext("2d");this.S=document.getElementById("layer2");this.k=this.S.getContext("2d");this.P()}P(){this.T=[];this.C.clearRect(0,0,this.B.width,this.B.height);this.k.clearRect(0,0,this.S.width,this.S.height);clearTimeout(this.A);this.A=setTimeout(()=>{this.B.width=window.innerWidth;this.B.height=window.innerHeight;this.S.width=window.innerWidth;this.S.height=window.innerHeight;this.D=0;this.r=Math.min(this.S.width,this.S.height)/1440*t;this.F(this.r)},100)}H(){return Math.random()*2*s-s}F(i){this.R=new l(this.S.width/2,this.S.height/2,i*o,0,0);this.T.push(this.R);this.W=this.R.position.clone();for(let s=i;s<=this.S.height-i;s+=2*i){for(let t=i;t<=this.S.width-i;t+=2*i){if(Math.random()*100>n){continue}const h=new l(t,s,i,this.H(),this.H());if(h.M(this.R)){continue}this.T.push(h)}}}j(){this.C.beginPath();this.C.lineWidth=2;this.C.strokeStyle=e;this.C.moveTo(this.W.x,this.W.y);this.C.lineTo(this.R.position.x,this.R.position.y);this.C.stroke();this.W=this.R.position.clone()}q(){this.k.beginPath();this.k.fillStyle=i;for(const t of this.T){this.k.moveTo(t.position.x+t.r,t.position.y);this.k.arc(t.position.x,t.position.y,t.r,0,c)}this.k.stroke();this.k.fill()}v(){for(let t=0;t<this.T.length;t++){const s=this.T[t];s.m();s.g(this.S.width,this.S.height);for(const i of this.T.slice(t+1)){s.p(i)}}this.k.clearRect(0,0,this.S.width,this.S.height);this.q();this.D++;if(this.D===h){this.D=0;this.j()}}}window.addEventListener("load",async function(){let t=new a;window.addEventListener("resize",t.P.bind(t),false);window.setInterval(t.v.bind(t),10)});
